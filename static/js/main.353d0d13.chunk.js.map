{"version":3,"sources":["images/userpic.png","images/logo.svg","components/Header.js","components/Card.js","contexts/CurrentUserContext.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/DeleteCardPopup.js","components/Register.js","components/ProtectedRoute.js","components/Login.js","components/InfoTooltip.js","utils/utils.js","utils/api.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","withRouter","email","onLogout","isLoggedIn","location","className","href","src","logo","alt","to","onClick","pathname","Card","card","onCardClick","onCardLike","onCardDelete","cardDeleteButtonClassName","cardLikeButtonClassName","link","name","type","likes","length","CurrentUserContext","React","createContext","Main","cards","onEditProfile","onAddPlace","onEditAvatar","useContext","avatar","about","userId","_id","defaultAvatar","map","isOwn","owner","isLiked","some","i","key","Footer","PopupWithForm","isOpen","onClose","onSubmit","children","formClassNameMod","noValidate","method","action","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","currentUser","useEffect","evt","preventDefault","onChange","input","target","value","id","placeholder","required","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","AvatarLinkRef","useRef","current","ref","AddPlacePopup","placeTitleRef","placeLinkRef","submitButtonText","ImagePopup","selectedCard","DeleteCardPopup","onDelete","Registration","onRegistration","setEmail","password","setPassword","ProtectedRoute","Component","component","props","loggedIn","path","Login","onLogin","InfoTooltip","text","pic","identity","url","token","localStorage","api","this","_url","res","ok","json","console","error","status","fetch","headers","Accept","Authorization","then","_handleResponse","body","JSON","stringify","cardId","bio","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isDeleteCardPopupOpen","setIsDeleteCardPopupOpen","isImagePopupOpen","setImagePopupOpen","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","setSelectedCard","setCurrentUser","setCards","setLoggedIn","history","useHistory","checkToken","getItem","getUserInfo","data","push","removeItem","handleError","closeAllPopups","document","avatarForm","reset","bioForm","cardForm","setTimeout","Promise","all","getInitialCards","user","reverse","catch","Provider","setUserInfo","createCard","newCard","setAvatar","deleteCard","newCards","filter","item","exact","signIn","setItem","err","signUp","handleResponseLike","dislikeCard","likeCard","Boolean","window","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"oGAAAA,EAAOC,QAAU,IAA0B,qC,mBCA3CD,EAAOC,QAAU,IAA0B,kC,mMCwC5BC,mBApCf,YAA0D,IAAzCC,EAAwC,EAAxCA,MAAOC,EAAiC,EAAjCA,SAAUC,EAAuB,EAAvBA,WAAYC,EAAW,EAAXA,SAC5C,OACE,4BAAQC,UAAU,UAChB,uBAAGC,KAAK,KAAI,yBAAKC,IAAKC,IAAMC,IAAI,4EAAgBJ,UAAU,kBAC1D,6BACE,0BAAMA,UAAU,iBAAiBJ,GAE/BE,GAAc,kBAAC,IAAD,CACZO,GAAI,WACJL,UAAU,eACVM,QAAST,GAHG,kCASQ,aAAtBE,EAASQ,UAA2B,kBAAC,IAAD,CAClCF,GAAI,WACJL,UAAU,gBAFwB,kCAQd,aAAtBD,EAASQ,UAA2B,kBAAC,IAAD,CAClCF,GAAI,WACJL,UAAU,gBAFwB,2ECA/BQ,MA1Bf,YAAkH,IAAnGC,EAAkG,EAAlGA,KAAMC,EAA4F,EAA5FA,YAAaC,EAA+E,EAA/EA,WAAYC,EAAmE,EAAnEA,aAAcC,EAAqD,EAArDA,0BAA2BC,EAA0B,EAA1BA,wBAWrF,OACE,yBAAKd,UAAU,kBACb,yBAAKE,IAAKO,EAAKM,KAAMX,IAAKK,EAAKO,KAAMhB,UAAU,kBAAkBM,QAZrE,WACEI,EAAYD,MAYV,yBAAKT,UAAU,uBACb,uBAAGA,UAAU,mBAAmBS,EAAKO,MACrC,yBAAKhB,UAAU,4BACb,4BAAQiB,KAAK,SAASX,QAb9B,WACEK,EAAWF,IAYsCT,UAAWc,IACtD,uBAAGd,UAAU,qBAAqBS,EAAKS,MAAMC,UAGjD,4BAAQF,KAAK,SAASX,QAd1B,WACEM,EAAaH,IAakCT,UAAS,8BAAyBa,O,iBCtBxEO,EAAqBC,IAAMC,gBC6CzBC,MAzCf,YAAwG,IAAzFC,EAAwF,EAAxFA,MAAOC,EAAiF,EAAjFA,cAAeC,EAAkE,EAAlEA,WAAYC,EAAsD,EAAtDA,aAAcjB,EAAwC,EAAxCA,YAAaC,EAA2B,EAA3BA,WAAYC,EAAe,EAAfA,aAAe,EAC1DS,IAAMO,WAAWR,GAArDS,EAD8F,EAC9FA,OAAQb,EADsF,EACtFA,KAAMc,EADgF,EAChFA,MAAYC,EADoE,EACzEC,IAE5B,OACE,oCACE,6BAAShC,UAAU,WACjB,4BAAQA,UAAU,yBAAyBM,QAASqB,GAClD,yBAAKzB,IAAK2B,GAAkBI,IAAe7B,IAAI,0DAAaJ,UAAU,qBAGxE,yBAAKA,UAAU,2BACb,wBAAIA,UAAU,iBAAiBgB,GAAc,sBAC7C,4BAAQC,KAAK,SAASjB,UAAU,uBAAuBM,QAASmB,KAElE,uBAAGzB,UAAU,gBAAgB8B,GAAgB,gEAC7C,4BAAQb,KAAK,SAASjB,UAAU,sBAAsBM,QAASoB,KAEjE,0BAAM1B,UAAU,YACbwB,EAAMU,KAAI,SAACzB,GACR,IAAM0B,EAAQ1B,EAAK2B,QAAUL,EACvBlB,EAAyB,8BAA0BsB,EAAQ,8BAAgC,8BAC3FE,EAAU5B,EAAKS,MAAMoB,MAAK,SAAAC,GAAC,OAAIA,IAAMR,KACrCjB,EAAuB,yBAAqBuB,EAAU,wBAA0B,kBACxF,OACE,kBAAC,EAAD,CACEG,IAAK/B,EAAKuB,IACVvB,KAAMA,EACNI,0BAA2BA,EAC3BC,wBAAyBA,EACzBJ,YAAaA,EACbC,WAAYA,EACZC,aAAcA,UCxBb6B,MAVf,WACE,OACE,4BAAQzC,UAAU,UAChB,uBAAGA,UAAU,qBAAb,4BCUS0C,MAbf,YAAuF,IAA/D1B,EAA8D,EAA9DA,KAAM2B,EAAwD,EAAxDA,OAAQC,EAAgD,EAAhDA,QAASC,EAAuC,EAAvCA,SAAUC,EAA6B,EAA7BA,SAAUC,EAAmB,EAAnBA,iBACjE,OACE,yBAAK/C,UAAS,2BAAsBgB,EAAtB,YAA8B2B,EAAS,2BAA6B,KAChF,yBAAK3C,UAAU,oBACb,4BAAQiB,KAAK,SAAUjB,UAAU,cAAcM,QAASsC,IACxD,0BAAMI,YAAU,EAAChD,UAAS,sBAAiB+C,GAAoBF,SAAUA,EAAU7B,KAAMA,EAAMiC,OAAO,OAAOC,OAAO,KACjHJ,MC4DIK,MAhEf,YAA4D,IAAjCR,EAAgC,EAAhCA,OAAQC,EAAwB,EAAxBA,QAASQ,EAAe,EAAfA,aAAe,EACjC/B,IAAMgC,SAAS,IADkB,mBAClDrC,EADkD,KAC5CsC,EAD4C,OAEnBjC,IAAMgC,SAAS,IAFI,mBAElDE,EAFkD,KAErCC,EAFqC,KAGnDC,EAAcpC,IAAMO,WAAWR,GAoBrC,OAlBAC,IAAMqC,WAAU,WACdJ,EAAQG,EAAYzC,MACpBwC,EAAeC,EAAY3B,SAC1B,CAAC2B,IAgBF,kBAAC,EAAD,CACEzC,KAAK,UACL2B,OAAQA,EACRC,QAASA,EACTC,SAVJ,SAAsBc,GACpBA,EAAIC,iBACJR,EAAa,CAACpC,OAAMc,MAAOyB,KASzBR,iBAAiB,+BAEjB,8BAAU/C,UAAU,0BAClB,wBAAIA,UAAU,gBAAd,6HACA,2BACEgB,KAAK,OAEL6C,SA1BR,SAA0BC,GACxBR,EAAQQ,EAAMC,OAAOC,QA0BfC,GAAG,aACHhD,KAAK,OACLiD,YAAY,yFACZC,UAAQ,EACRC,UAAU,IACVC,UAAU,KACVrE,UAAU,mCAEZ,0BAAMiE,GAAG,mBAAmBjE,UAAU,iBACtC,2BACEgB,KAAK,MAEL6C,SAnCR,SAAiCC,GAC/BN,EAAeM,EAAMC,OAAOC,QAmCtBC,GAAG,YACHhD,KAAK,OACLiD,YAAY,+FACZC,UAAQ,EACRC,UAAU,IACVC,UAAU,MACVrE,UAAU,kCACZ,0BAAMiE,GAAG,kBAAkBjE,UAAU,iBACrC,4BAAQiB,KAAK,SAASjB,UAAU,eAAhC,6DCxBOsE,MAnCf,YAA6D,IAAnC3B,EAAkC,EAAlCA,OAAQC,EAA0B,EAA1BA,QAAS2B,EAAiB,EAAjBA,eACnCC,EAAgBnD,IAAMoD,SAS5B,OACE,kBAAC,EAAD,CACEzD,KAAK,aACL2B,OAAQA,EACRC,QAASA,EACTC,SAZJ,SAAsBc,GACpBA,EAAIC,iBACJW,EAAe,CACb1C,OAAQ2C,EAAcE,QAAQV,SAU9BjB,iBAAiB,8BAEjB,8BAAU/C,UAAU,0BAClB,wBAAIA,UAAU,gBAAd,yFACA,2BACEgB,KAAK,SACL2D,IAAKH,EACLP,GAAG,eACHhD,KAAK,MACLiD,YAAY,qGACZC,UAAQ,EACRnE,UAAU,mCAEZ,0BAAMiE,GAAG,qBAAqBjE,UAAU,iBACxC,4BAAQiB,KAAK,SAASjB,UAAU,eAAhC,6DCsBO4E,MApDf,YAAuD,IAA/BjC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,QAASlB,EAAa,EAAbA,WACjCmD,EAAgBxD,IAAMoD,SACtBK,EAAezD,IAAMoD,SAW3B,OACE,kBAAC,EAAD,CACEzD,KAAK,WACL2B,OAAQA,EACRC,QAASA,EACTC,SAdJ,SAAsBc,GACpBA,EAAIC,iBACJlC,EAAW,CACTV,KAAM6D,EAAcH,QAAQV,MAC5BjD,KAAM+D,EAAaJ,QAAQV,SAW3Be,iBAAiB,yDACjBhC,iBAAiB,+BAEjB,8BAAU/C,UAAU,0BAClB,wBAAIA,UAAU,gBAAd,iEACA,2BACEgB,KAAK,OACL2D,IAAKE,EACLZ,GAAG,cACHhD,KAAK,OACLiD,YAAY,mDACZC,UAAQ,EACRC,UAAU,IACVC,UAAU,KACVrE,UAAU,oCAEZ,0BAAMiE,GAAG,oBAAoBjE,UAAU,iBACvC,2BACEgB,KAAK,OACL2D,IAAKG,EACLb,GAAG,aACHhD,KAAK,MACLiD,YAAY,qGACZC,UAAQ,EACRnE,UAAU,mCAEZ,0BAAMiE,GAAG,mBAAmBjE,UAAU,iBACtC,4BAAQiB,KAAK,SAASjB,UAAU,eAAhC,6DCnCOgF,MAZf,YAAsD,IAAjCrC,EAAgC,EAAhCA,OAAQC,EAAwB,EAAxBA,QAASqC,EAAe,EAAfA,aACpC,OACE,yBAAKjF,UAAS,qCAAgC2C,EAAS,2BAA6B,KAClF,yBAAK3C,UAAU,gDACb,4BAAQiB,KAAK,SAASjB,UAAU,cAAcM,QAASsC,IACvD,yBAAK1C,IAAK+E,EAAeA,EAAalE,KAAO,GAAIX,IAAK6E,EAAajE,KAAMhB,UAAU,iBACnF,wBAAIA,UAAU,sBAAsBiF,EAAajE,SCkB1CkE,MAvBf,YAAqE,IAA3CvC,EAA0C,EAA1CA,OAAQC,EAAkC,EAAlCA,QAASuC,EAAyB,EAAzBA,SAAUF,EAAe,EAAfA,aAOnD,OACE,kBAAC,EAAD,CACEjE,KAAK,MACL2B,OAAQA,EACRC,QAASA,EACTC,SAVJ,SAAsBc,GACpBA,EAAIC,iBACJuB,EAASF,IASPlC,iBAAiB,6BAEjB,8BAAU/C,UAAU,0BAClB,wBAAIA,UAAU,gBAAd,4DACA,4BAAQiB,KAAK,SAASjB,UAAU,eAAhC,mBC2COoF,MA5Df,YAA0C,IAAlBC,EAAiB,EAAjBA,eAAiB,EACbhE,IAAMgC,SAAS,IADF,mBAChCzD,EADgC,KACzB0F,EADyB,OAEPjE,IAAMgC,SAAS,IAFR,mBAEhCkC,EAFgC,KAEtBC,EAFsB,KAiBvC,OACE,yBAAKxF,UAAU,WACb,wBAAIA,UAAU,kBAAd,sEAEA,0BACEgB,KAAK,mBACLhB,UAAU,gBACV6C,SApBN,SAAuBc,GACrBA,EAAIC,iBACJyB,EAAe,CAAEzF,QAAO2F,cAmBpBrC,OAAO,IACPF,YAAU,GAEV,2BACEhC,KAAK,oBACLiD,GAAG,qBACHjE,UAAU,iBACVkE,YAAY,SACZE,UAAU,IACVC,UAAU,KACVL,MAAOpE,EACPiE,SA3BR,SAA2BC,GACzBwB,EAASxB,EAAMC,OAAOC,QA2BhB/C,KAAK,QACLkD,UAAQ,IAEV,2BACEnD,KAAK,uBACLiD,GAAG,wBACHjE,UAAU,iBACVkE,YAAY,uCACZE,UAAU,IACVC,UAAU,KACVL,MAAOuB,EACP1B,SAnCR,SAA8BC,GAC5B0B,EAAY1B,EAAMC,OAAOC,QAmCnB/C,KAAK,WACLkD,UAAQ,IAEV,4BAAQnE,UAAU,kBAAkBiB,KAAK,UAAzC,gHACA,uBAAGjB,UAAU,iBAAb,uHAAkD,kBAAC,IAAD,CAAMA,UAAU,gBAAgBK,GAAG,YAAnC,uC,QC3C3CoF,EAVQ,SAAC,GAAsC,IAA1BC,EAAyB,EAApCC,UAAyBC,EAAW,6BAC3D,OACE,kBAAC,IAAD,KAEIA,EAAMC,SAAW,kBAACH,EAAD,iBAAeE,EAAf,CAAsBE,KAAMF,EAAME,QAAW,kBAAC,IAAD,CAAUzF,GAAG,eCwDpE0F,MA5Df,YAA4B,IAAXC,EAAU,EAAVA,QAAU,EACC3E,IAAMgC,SAAS,IADhB,mBAClBzD,EADkB,KACX0F,EADW,OAEOjE,IAAMgC,SAAS,IAFtB,mBAElBkC,EAFkB,KAERC,EAFQ,KAiBzB,OACE,yBAAKxF,UAAU,WACb,wBAAIA,UAAU,kBAAd,4BAEA,0BACEA,UAAU,gBACVgB,KAAK,YACL6B,SApBN,SAAuBc,GACrBA,EAAIC,iBACJoC,EAAQ,CAAEpG,QAAO2F,cAmBbrC,OAAO,IACPF,YAAU,GAEV,2BACEhC,KAAK,aACLiD,GAAG,cACHjE,UAAU,iBACVkE,YAAY,QACZE,UAAU,IACVC,UAAU,KACVL,MAAOpE,EACPiE,SA3BR,SAA2BC,GACzBwB,EAASxB,EAAMC,OAAOC,QA2BhB/C,KAAK,QACLkD,UAAQ,IAEV,2BACEnD,KAAK,gBACLiD,GAAG,iBACHjE,UAAU,iBACVkE,YAAY,uCACZE,UAAU,IACVC,UAAU,KACVL,MAAOuB,EACP1B,SAnCR,SAA8BC,GAC5B0B,EAAY1B,EAAMC,OAAOC,QAmCnB/C,KAAK,WACLkD,UAAQ,IAEV,4BAAQnE,UAAU,kBAAkBiB,KAAK,UAAzC,kCACA,uBAAGjB,UAAU,iBAAb,oIAAqD,kBAAC,IAAD,CAAMA,UAAU,gBAAgBK,GAAG,YAAnC,2ECrC9C4F,MAhBf,YAAyE,IAAjDtD,EAAgD,EAAhDA,OAAQC,EAAwC,EAAxCA,QAASsD,EAA+B,EAA/BA,KAAMC,EAAyB,EAAzBA,IAAKpD,EAAoB,EAApBA,iBAClD,OACE,kBAAC,EAAD,CACE/B,KAAK,UACL2B,OAAQA,EACRC,QAASA,EACTG,iBAAkBA,GAElB,yBAAK/C,UAAS,yBAAoBmG,KAClC,uBAAGnG,UAAU,uBACVkG,K,gBCZIE,EAAW,CAGpBC,IAAK,gCAELC,MAAOC,aAAaD,OCoJXE,EAAM,I,WAvJjB,cAA0B,EAAbF,MAAc,IAAPD,EAAM,EAANA,IAAM,oBAExBI,KAAKC,KAAOL,E,4DAKEM,GACd,GAAIA,EAAIC,GACN,OAAOD,EAAIE,OAEXC,QAAQC,MAAR,uBAA8BJ,EAAIK,W,yCAOV,IAAVV,EAAS,EAATA,MAChB,OAAOW,MAAM,GAAD,OAAIR,KAAKC,KAAT,UAAuB,CACjCQ,QAAS,CACPC,OAAQ,mBACR,eAAgB,mBAChBC,cAAc,UAAD,OAAYd,IAE3BrD,OAAQ,QAEPoE,KAAKZ,KAAKa,mB,oCAGkB,IAArBhB,EAAoB,EAApBA,MAAOtF,EAAa,EAAbA,KAAMD,EAAO,EAAPA,KACvB,OAAOkG,MAAM,GAAD,OAAIR,KAAKC,KAAT,UAAuB,CACjCQ,QAAS,CACPC,OAAQ,mBACRC,cAAc,UAAD,OAAYd,GACzB,eAAgB,oBAElBiB,KAAMC,KAAKC,UAAU,CACnBzG,KAAMA,EACND,KAAMA,IAERkC,OAAQ,SAEPoE,KAAKZ,KAAKa,mB,oCAGU,IAAbhB,EAAY,EAAZA,MAAOrC,EAAK,EAALA,GACjB,OAAOgD,MAAM,GAAD,OAAKR,KAAKC,KAAV,kBAAwBzC,GAAO,CACzCiD,QAAS,CACPC,OAAQ,mBACRC,cAAc,UAAD,OAAYd,GACzB,eAAgB,oBAElBrD,OAAQ,WAEPoE,KAAKZ,KAAKa,mB,kCAGY,IAAjBhB,EAAgB,EAAhBA,MAAOoB,EAAS,EAATA,OACf,OAAOT,MAAM,GAAD,OAAKR,KAAKC,KAAV,kBAAwBgB,EAAxB,UAAyC,CACnDR,QAAS,CACPC,OAAQ,mBACRC,cAAc,UAAD,OAAYd,GACzB,eAAgB,oBAElBrD,OAAQ,QAEToE,KAAKZ,KAAKa,mB,qCAGiB,IAAjBhB,EAAgB,EAAhBA,MAAOoB,EAAS,EAATA,OAClB,OAAOT,MAAM,GAAD,OAAKR,KAAKC,KAAV,kBAAwBgB,EAAxB,UAAyC,CACnDR,QAAS,CACP,OAAU,mBACVE,cAAc,UAAD,OAAYd,GACzB,eAAgB,oBAElBrD,OAAQ,WAEToE,KAAKZ,KAAKa,mB,qCAKW,IAAVhB,EAAS,EAATA,MACZ,OAAOW,MAAM,GAAD,OAAIR,KAAKC,KAAT,aAA0B,CACpCQ,QAAS,CACP,OAAU,mBACVE,cAAc,UAAD,OAAYd,GACzB,eAAgB,oBAElBrD,OAAQ,QAEToE,KAAKZ,KAAKa,mB,qCAGqB,IAApBtG,EAAmB,EAAnBA,KAAM2G,EAAa,EAAbA,IAAKrB,EAAQ,EAARA,MACvB,OAAOW,MAAM,GAAD,OAAIR,KAAKC,KAAT,aAA0B,CAClCQ,QAAS,CACP,OAAU,mBACVE,cAAc,UAAD,OAAYd,GACzB,eAAgB,oBAElBiB,KAAMC,KAAKC,UAAU,CACnBzG,KAAMA,EACNc,MAAO6F,IAET1E,OAAQ,UAGXoE,KAAKZ,KAAKa,mB,mCAGe,IAAjBzF,EAAgB,EAAhBA,OAAQyE,EAAQ,EAARA,MACjB,OAAOW,MAAM,GAAD,OAAKR,KAAKC,KAAV,oBAAmC,CAC7CQ,QAAS,CACP,OAAU,mBACVE,cAAc,UAAD,OAAYd,GACzB,eAAgB,oBAElBiB,KAAMC,KAAKC,UAAU,CAAC5F,WACtBoB,OAAQ,UAEToE,KAAKZ,KAAKa,mB,gCAGgB,IAApB1H,EAAmB,EAAnBA,MAAO2F,EAAY,EAAZA,SACd,OAAO0B,MAAM,GAAD,OAAIR,KAAKC,KAAT,WAAwB,CAClCQ,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBjE,OAAQ,OACRsE,KAAMC,KAAKC,UAAU,CAAE7H,QAAO2F,eAE7B8B,KAAKZ,KAAKa,mB,gCAGc,IAApB1H,EAAmB,EAAnBA,MAAO2F,EAAY,EAAZA,SACd,OAAO0B,MAAM,GAAD,OAAIR,KAAKC,KAAT,WAAwB,CAClCQ,QAAS,CACPC,OAAQ,mBACR,eAAgB,oBAElBlE,OAAQ,OACRsE,KAAMC,KAAKC,UAAU,CAAE7H,QAAO2F,eAE7B8B,KAAKZ,KAAKa,qB,KAIE,CAAQlB,GC6IZzG,mBArRf,WAAgB,IAAD,EAC+C0B,IAAMgC,UAAS,GAD9D,mBACNuE,EADM,KACkBC,EADlB,OAEyCxG,IAAMgC,UAAS,GAFxD,mBAENyE,EAFM,KAEeC,EAFf,OAG6C1G,IAAMgC,UAAS,GAH5D,mBAGN2E,EAHM,KAGiBC,EAHjB,OAI6C5G,IAAMgC,UAAS,GAJ5D,mBAIN6E,EAJM,KAIiBC,EAJjB,OAKiC9G,IAAMgC,UAAS,GALhD,mBAKN+E,EALM,KAKYC,EALZ,OAM+ChH,IAAMgC,SAAS,CAACV,QAAQ,EAAOuD,KAAM,OAAQC,IAAK,OANjG,mBAMNmC,EANM,KAMkBC,EANlB,OAO2BlH,IAAMgC,SAAS,IAP1C,mBAON4B,EAPM,KAOQuD,EAPR,OAQyBnH,IAAMgC,SAAS,CAACrC,KAAM,qBAAOc,MAAO,+DAAcD,OAAQI,MARnF,mBAQNwB,EARM,KAQOgF,EARP,OAUapH,IAAMgC,SAAS,IAV5B,mBAUNzD,GAVM,KAUC0F,GAVD,QAWajE,IAAMgC,SAAS,IAX5B,qBAWN7B,GAXM,MAWCkH,GAXD,SAYmBrH,IAAMgC,UAAS,GAZlC,qBAYNwC,GAZM,MAYI8C,GAZJ,MAcPC,GAAUC,cAiBhB,SAASC,KACP,GAAIvC,aAAawC,QAAQ,SAAU,CACjC,IAAMzC,EAAQC,aAAawC,QAAQ,SACnCvC,EAAIwC,YAAY,CAAC1C,UACde,MAAK,SAACV,GACDA,EAAIsC,MACNN,IAAY,GACZrD,GAASqB,EAAIsC,KAAKrJ,OAClBgJ,GAAQM,KAAK,OAEb3C,aAAa4C,WAAW,SACxBR,IAAY,GACZF,EAAe,IACfnD,GAAS,SAuHnB,SAAS8D,GAAYrC,GACnBD,QAAQC,MAAMA,GAIhB,SAASsC,KACPpB,GAAyB,GACzBqB,SAASC,WAAWC,QACpB3B,GAA0B,GAC1ByB,SAASG,QAAQD,QACjBzB,GAAuB,GACvBuB,SAASI,SAASF,QAClBrB,GAAyB,GACzBE,GAAkB,GAClBE,EAA0B,CAAC5F,QAAQ,EAAOuD,KAAM,GAAIC,IAAK,KACzDwD,YAAW,WAAanB,EAAgB,MAAM,KAGhD,OArKAnH,IAAMqC,WAAU,WAAOoF,OAEpB,IAEHzH,IAAMqC,WAAU,WACVmC,IACF+D,QAAQC,IAAI,CAACrD,EAAIwC,YAAY,CAAE1C,MAAOC,aAAaD,QAAUE,EAAIsD,gBAAgB,CAAExD,MAAOC,aAAaD,UACpGe,MAAK,YAAwC,IAAD,mBAA7B0C,EAA6B,KAAnCd,KAAsBzH,EAAa,KAAnByH,KACxBR,EAAesB,GACfrB,GAASlH,EAAMwI,cAEhBC,MAAMb,MAEV,CAACvD,KAyJF,kBAACzE,EAAmB8I,SAApB,CAA6BlG,MAAOP,GAChC,yBAAKzD,UAAU,QAIb,kBAAC,EAAD,CACE2C,OAAQiF,EACRhF,QAASyG,GACTjG,aAtDV,YAA0C,IAAfpC,EAAc,EAAdA,KAAMc,EAAQ,EAARA,MAC/B0E,EAAI2D,YAAY,CAACnJ,OAAM2G,IAAK7F,EAAOwE,MAAOC,aAAaD,QACpDe,MAAK,WACJoB,EAAe,2BAAIhF,GAAL,IAAkBzC,OAAMc,WACtCuH,QAEDY,MAAMb,OAqDH,kBAAC,EAAD,CACEzG,OAAQmF,EACRlF,QAASyG,GACT3H,WA5CV,YAA6C,IAAdV,EAAa,EAAbA,KAAMD,EAAO,EAAPA,KACnCyF,EAAI4D,WAAW,CAACpJ,OAAMD,OAAMuF,MAAOC,aAAaD,QAC7Ce,MAAK,YAAsB,IAAbgD,EAAY,EAAlBpB,KACPP,GAAS,CAAC2B,GAAF,mBAAc7I,MACtB6H,QAEDY,MAAMb,OA2CH,kBAAC,EAAD,CACEzG,OAAQqF,EACRpF,QAASyG,GACT9E,eA7DV,YAAuC,IAAV1C,EAAS,EAATA,OAC3B2E,EAAI8D,UAAU,CAACzI,SAAQyE,MAAOC,aAAaD,QACxCe,MAAK,WACJoB,EAAe,2BAAIhF,GAAL,IAAkB5B,YAChCwH,QAEDY,MAAMb,OA4DH,kBAAC,EAAD,CACEpI,KAAK,SACL2B,OAAQuF,EACRtF,QAASyG,GACTlE,SA5FV,SAA0B1E,GACxB+F,EAAI+D,WAAW,CAACtG,GAAIxD,EAAKuB,IAAKsE,MAAOC,aAAaD,QAC/Ce,MAAK,WACJ,IAAMmD,EAAWhJ,GAAMiJ,QAAO,SAACC,GAC7B,OAAOA,IAASjK,KAElBiI,GAAS8B,GACThC,EAAgB,IAChBa,QAEDY,MAAMb,KAmFDnE,aAAcA,IAKhB,kBAAC,EAAD,CACEtC,OAAQyF,EACRxF,QAASyG,GACTpE,aAAcA,IAKhB,kBAAC,EAAD,CACEiB,KAAMoC,EAAuBpC,KAC7BC,IAAKmC,EAAuBnC,IAC5BxD,OAAQ2F,EAAuB3F,OAC/BC,QAASyG,GACTtG,iBAAiB,+BAKnB,kBAAC,EAAD,CACEnD,MAAOA,GACPC,SA/LV,WACE0G,aAAa4C,WAAW,SACxBR,IAAY,GACZF,EAAe,IACfnD,GAAS,KA4LDxF,WAAY+F,GACZ+C,QAASA,KAGX,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO9C,KAAK,WAAW6E,OAAK,GAC1B,kBAAC,EAAD,CAAO3E,QA/LnB,YAA4C,IAApBpG,EAAmB,EAAnBA,MAAO2F,EAAY,EAAZA,SAC7BiB,EAAIoE,OAAO,CAAEhL,QAAO2F,aACjB8B,MAAK,SAAC4B,GACDA,EAAK3C,QACPC,aAAasE,QAAQ,QAAS5B,EAAK3C,OACnCqC,IAAY,GACZG,SAGHmB,OAAM,SAACa,GACNhE,QAAQC,MAAM+D,GACdvC,EAA0B,CAAC5F,QAAQ,EAAMuD,KAAM,qMAA2CC,IAAK,iBAuL3F,kBAAC,IAAD,CAAOL,KAAK,WAAW6E,OAAK,GAC1B,kBAAC,EAAD,CAActF,eApL1B,YAA+C,IAApBzF,EAAmB,EAAnBA,MAAO2F,EAAY,EAAZA,SAChCiB,EAAIuE,OAAO,CAAEnL,QAAO2F,aACjB8B,MAAK,SAACV,GACDA,EAAIsC,OACNV,EAA0B,CAAC5F,QAAQ,EAAMuD,KAAM,wKAAkCC,IAAK,OACtFyC,GAAQM,KAAK,gBAGhBe,OAAM,SAACa,GACNhE,QAAQC,MAAM+D,GACdvC,EAA0B,CAAC5F,QAAQ,EAAMuD,KAAM,qMAA2CC,IAAK,iBA+K3F,kBAAC,EAAD,CACER,UAAWpE,EACXsE,SAAUA,GACVrE,MAAOA,GACPC,cA5KZ,WACEoG,GAA0B,IA4KhBnG,WA1KZ,WACEqG,GAAuB,IA0KbpG,aAjLZ,WACEsG,GAAyB,IAiLfvH,YArKZ,SAAyBD,GACvB+H,EAAgB/H,GAChB4H,GAAkB,IAoKR1H,WAjKZ,SAAwBF,GAGtB,SAASuK,EAAT,GAA8C,IAAXX,EAAU,EAAhBpB,KACrBuB,EAAWhJ,GAAMU,KAAI,SAACwI,GAAD,OAAUA,EAAK1I,MAAQvB,EAAKuB,IAAMqI,EAAUK,KACvEhC,GAAS8B,GAJK/J,EAAKS,MAAMoB,MAAK,SAAAoI,GAAI,OAAIA,IAASjH,EAAYzB,OAQ3DwE,EAAIyE,YAAY,CAACvD,OAAQjH,EAAKuB,IAAKsE,MAAOC,aAAaD,QACpDe,KAAK2D,GACLf,MAAMb,IAET5C,EAAI0E,SAAS,CAACxD,OAAQjH,EAAKuB,IAAKsE,MAAOC,aAAaD,QACjDe,KAAK2D,GACLf,MAAMb,KAmJDxI,aA3KZ,SAA+BH,GAC7B+H,EAAgB/H,GAChB0H,GAAyB,OA8KnB,kBAAC,EAAD,WCrRUgD,QACW,cAA7BC,OAAOrL,SAASsL,UAEe,UAA7BD,OAAOrL,SAASsL,UAEhBD,OAAOrL,SAASsL,SAASC,MACvB,2DCXNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,KACE,kBAAC,EAAD,QAIJnC,SAASoC,eAAe,SDqHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBxE,MAAK,SAAAyE,GACJA,EAAaC,gBAEd9B,OAAM,SAAAlD,GACLD,QAAQC,MAAMA,EAAMiF,c","file":"static/js/main.353d0d13.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/userpic.c3b119f7.png\";","module.exports = __webpack_public_path__ + \"static/media/logo.2b1f7ee5.svg\";","import React from 'react';\r\nimport logo from '../images/logo.svg';\r\nimport { withRouter, Link } from \"react-router-dom\";\r\n\r\nfunction Header({email, onLogout, isLoggedIn, location}) {\r\n  return(\r\n    <header className=\"header\">\r\n      <a href=\"/\"><img src={logo} alt=\"Логотип Место\" className=\"header__logo\" /></a>\r\n      <div>\r\n        <span className=\"header__email\">{email}</span>\r\n        {\r\n          isLoggedIn && <Link\r\n            to={'/sign-in'}\r\n            className=\"header__link\"\r\n            onClick={onLogout}\r\n        >\r\n          Выход\r\n        </Link>\r\n        }\r\n        {\r\n          location.pathname === '/sign-up' && <Link\r\n            to={'/sign-in'}\r\n            className=\"header__link\"\r\n        >\r\n          Войти\r\n        </Link>\r\n        }\r\n        {\r\n          location.pathname === '/sign-in' && <Link\r\n            to={'/sign-up'}\r\n            className=\"header__link\"\r\n          >\r\n            Регистрация\r\n          </Link>\r\n        }\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default withRouter(Header);\r\n","import React from 'react';\r\n\r\nfunction Card({card, onCardClick, onCardLike, onCardDelete, cardDeleteButtonClassName, cardLikeButtonClassName}) {\r\n  function handleClick() {\r\n    onCardClick(card);\r\n  }\r\n  function handleLike() {\r\n    onCardLike(card)\r\n  }\r\n  function handleDelete() {\r\n    onCardDelete(card)\r\n  }\r\n\r\n  return (\r\n    <div className=\"elements__card\">\r\n      <img src={card.link} alt={card.name} className=\"elements__photo\" onClick={handleClick} />\r\n      <div className=\"elements__container\">\r\n        <p className=\"elements__title\">{card.name}</p>\r\n        <div className=\"elements__like-container\">\r\n          <button type=\"button\" onClick={handleLike} className={cardLikeButtonClassName}/>\r\n          <p className=\"elements__counter\">{card.likes.length}</p>\r\n        </div>\r\n      </div>\r\n      <button type=\"button\" onClick={handleDelete} className={`elements__trash-bin ${cardDeleteButtonClassName}`} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Card;","import React from \"react\";\r\nexport const CurrentUserContext = React.createContext()","import React from 'react';\r\nimport Card from './Card';\r\nimport defaultAvatar from '../images/userpic.png';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({cards, onEditProfile, onAddPlace, onEditAvatar, onCardClick, onCardLike, onCardDelete}) {\r\n  const {avatar, name, about, _id: userId} = React.useContext(CurrentUserContext);\r\n\r\n  return(\r\n    <>\r\n      <section className=\"profile\">\r\n        <button className=\"profile__button-avatar\" onClick={onEditAvatar}>\r\n          <img src={avatar ? avatar : defaultAvatar} alt=\"Ваш аватар\" className=\"profile__avatar\" />\r\n        </button>\r\n\r\n        <div className=\"profile__name-container\">\r\n          <h1 className=\"profile__name\">{name ? name : 'Имя'}</h1>\r\n          <button type=\"button\" className=\"profile__button-edit\" onClick={onEditProfile}/>\r\n        </div>\r\n        <p className=\"profile__bio\">{about ? about : 'Информация'}</p>\r\n        <button type=\"button\" className=\"profile__button-add\" onClick={onAddPlace}/>\r\n      </section>\r\n      <main className=\"elements\">\r\n        {cards.map((card) => {\r\n            const isOwn = card.owner === userId;\r\n            const cardDeleteButtonClassName = `elements__trash-bin ${isOwn ? 'elements__trash-bin_visible' : 'elements__trash-bin_hidden'}`;\r\n            const isLiked = card.likes.some(i => i === userId);\r\n            const cardLikeButtonClassName = `elements__like ${isLiked ? 'elements__like_active' : 'elements__like'}`;\r\n          return(\r\n            <Card\r\n              key={card._id}\r\n              card={card}\r\n              cardDeleteButtonClassName={cardDeleteButtonClassName}\r\n              cardLikeButtonClassName={cardLikeButtonClassName}\r\n              onCardClick={onCardClick}\r\n              onCardLike={onCardLike}\r\n              onCardDelete={onCardDelete}\r\n            />\r\n          )\r\n        }\r\n        )}\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n  return(\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">\r\n        © 2020 Mesto Russia\r\n      </p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n\r\n","import React from 'react';\r\n\r\nfunction PopupWithForm({name, isOpen, onClose, onSubmit, children, formClassNameMod}) {\r\n  return(\r\n    <div className={`popup popup_type_${name} ${isOpen ? 'popup_visibility_visible' : ''}`}>\r\n      <div className=\"popup__container\">\r\n        <button type=\"button\"  className=\"popup__exit\" onClick={onClose}/>\r\n        <form noValidate className={`popup__form ${formClassNameMod}`} onSubmit={onSubmit} name={name} method=\"post\" action=\"#\">\r\n          {children}\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React from 'react';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleNameChange(input) {\r\n    setName(input.target.value);\r\n  }\r\n\r\n  function handleDescriptionChange(input) {\r\n    setDescription(input.target.value);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateUser({name, about: description});\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"bioForm\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      formClassNameMod=\"popup__form_type_two-inputs\"\r\n    >\r\n      <fieldset className=\"popup__input-container\">\r\n        <h2 className=\"popup__title\">Редактировать профиль</h2>\r\n        <input\r\n          name=\"name\"\r\n          //value={name}\r\n          onChange={handleNameChange}\r\n          id=\"name-input\"\r\n          type=\"text\"\r\n          placeholder=\"Введите Ваше имя\"\r\n          required\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          className=\"popup__input popup__input_name\"\r\n        />\r\n        <span id=\"name-input-error\" className=\"popup__error\"/>\r\n        <input\r\n          name=\"bio\"\r\n          //value={description}\r\n          onChange={handleDescriptionChange}\r\n          id=\"bio-input\"\r\n          type=\"text\"\r\n          placeholder=\"Расскажите о себе\"\r\n          required\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          className=\"popup__input popup__input_bio\" />\r\n        <span id=\"bio-input-error\" className=\"popup__error\"/>\r\n        <button type=\"submit\" className=\"popup__save\">Сохранить</button>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup({isOpen, onClose, onUpdateAvatar}) {\r\n  const AvatarLinkRef = React.useRef()\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: AvatarLinkRef.current.value\r\n    });\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n      name=\"avatarForm\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      formClassNameMod=\"popup__form_type_one-input\"\r\n    >\r\n      <fieldset className=\"popup__input-container\">\r\n        <h2 className=\"popup__title\">Обновить аватар</h2>\r\n        <input\r\n          name=\"avatar\"\r\n          ref={AvatarLinkRef}\r\n          id=\"avatar-input\"\r\n          type=\"url\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          required\r\n          className=\"popup__input popup__input_link\"\r\n        />\r\n        <span id=\"avatar-input-error\" className=\"popup__error\"/>\r\n        <button type=\"submit\" className=\"popup__save\">Сохранить</button>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\nexport default EditAvatarPopup;\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup({isOpen, onClose, onAddPlace}) {\r\n  const placeTitleRef = React.useRef()\r\n  const placeLinkRef = React.useRef()\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onAddPlace({\r\n      name: placeTitleRef.current.value,\r\n      link: placeLinkRef.current.value\r\n    });\r\n\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n      name=\"cardForm\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      submitButtonText=\"Сохранить\"\r\n      formClassNameMod=\"popup__form_type_two-inputs\"\r\n    >\r\n      <fieldset className=\"popup__input-container\">\r\n        <h2 className=\"popup__title\">Новое место</h2>\r\n        <input\r\n          name=\"name\"\r\n          ref={placeTitleRef}\r\n          id=\"title-input\"\r\n          type=\"text\"\r\n          placeholder=\"Название\"\r\n          required\r\n          minLength=\"2\"\r\n          maxLength=\"30\"\r\n          className=\"popup__input popup__input_title\"\r\n        />\r\n        <span id=\"title-input-error\" className=\"popup__error\"/>\r\n        <input\r\n          name=\"link\"\r\n          ref={placeLinkRef}\r\n          id=\"link-input\"\r\n          type=\"url\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          required\r\n          className=\"popup__input popup__input_link\"\r\n        />\r\n        <span id=\"link-input-error\" className=\"popup__error\"/>\r\n        <button type=\"submit\" className=\"popup__save\">Сохранить</button>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\n\r\nfunction ImagePopup({isOpen, onClose, selectedCard}) {\r\n  return(\r\n    <div className={`popup popup_type_max-photo ${isOpen ? 'popup_visibility_visible' : ''}`}>\r\n      <div className=\"popup__container popup__container_type_photo\">\r\n        <button type=\"button\" className=\"popup__exit\" onClick={onClose}/>\r\n        <img src={selectedCard ? selectedCard.link : ''} alt={selectedCard.name} className=\"popup__photo\" />\r\n        <h2 className=\"popup__photo-title\">{selectedCard.name}</h2>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction DeleteCardPopup({isOpen, onClose, onDelete, selectedCard}) {\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    onDelete(selectedCard);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"bio\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      formClassNameMod=\"popup__form_type_no-input\"\r\n    >\r\n      <fieldset className=\"popup__input-container\">\r\n        <h2 className=\"popup__title\">Вы уверены?</h2>\r\n        <button type=\"submit\" className=\"popup__save\">Да</button>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default DeleteCardPopup;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Registration ({onRegistration}) {\r\n  const [email, setEmail] = React.useState('')\r\n  const [password, setPassword] = React.useState('')\r\n\r\n  function handleSubmit (evt) {\r\n    evt.preventDefault();\r\n    onRegistration({ email, password });\r\n  }\r\n\r\n  function handleEmailChange(input) {\r\n    setEmail(input.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(input) {\r\n    setPassword(input.target.value);\r\n  }\r\n\r\n  return (\r\n    <div className=\"sign-in\">\r\n      <h2 className=\"sign-in__title\">Регистрация</h2>\r\n\r\n      <form\r\n        name=\"registrationForm\"\r\n        className=\"sign-in__form\"\r\n        onSubmit={handleSubmit}\r\n        action=\"#\"\r\n        noValidate\r\n      >\r\n        <input\r\n          name=\"registrationEmail\"\r\n          id=\"registration-email\"\r\n          className=\"sign-in__input\"\r\n          placeholder=\"E-mail\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          value={email}\r\n          onChange={handleEmailChange}\r\n          type=\"email\"\r\n          required\r\n        />\r\n        <input\r\n          name=\"registrationPassword\"\r\n          id=\"registration-password\"\r\n          className=\"sign-in__input\"\r\n          placeholder=\"Пароль\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          value={password}\r\n          onChange={handlePasswordChange}\r\n          type=\"password\"\r\n          required\r\n        />\r\n        <button className=\"sign-in__button\" type=\"submit\">Зарегистрироваться</button>\r\n        <p className=\"sign-in__text\">Уже зарегистрированы?<Link className=\"sign-in__link\" to=\"/sign-in\"> Войти</Link></p>\r\n      </form>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Registration;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({component: Component, ...props}) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        props.loggedIn ? <Component {...props} path={props.path} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Login ({onLogin}) {\r\n  const [email, setEmail] = React.useState('')\r\n  const [password, setPassword] = React.useState('')\r\n\r\n  function handleSubmit (evt) {\r\n    evt.preventDefault();\r\n    onLogin({ email, password });\r\n  }\r\n\r\n  function handleEmailChange(input) {\r\n    setEmail(input.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(input) {\r\n    setPassword(input.target.value);\r\n  }\r\n\r\n  return (\r\n    <div className=\"sign-in\">\r\n      <h2 className=\"sign-in__title\">Вход</h2>\r\n\r\n      <form\r\n        className=\"sign-in__form\"\r\n        name=\"loginForm\"\r\n        onSubmit={handleSubmit}\r\n        action=\"#\"\r\n        noValidate\r\n      >\r\n        <input\r\n          name=\"loginEmail\"\r\n          id=\"login-email\"\r\n          className=\"sign-in__input\"\r\n          placeholder=\"Email\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          value={email}\r\n          onChange={handleEmailChange}\r\n          type=\"email\"\r\n          required\r\n        />\r\n        <input\r\n          name=\"loginPassword\"\r\n          id=\"login-password\"\r\n          className=\"sign-in__input\"\r\n          placeholder=\"Пароль\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          value={password}\r\n          onChange={handlePasswordChange}\r\n          type=\"password\"\r\n          required\r\n        />\r\n        <button className=\"sign-in__button\" type=\"submit\">Войти</button>\r\n        <p className=\"sign-in__text\">Ещё не зарегистрированы?<Link className=\"sign-in__link\" to=\"/sign-up\"> Регистрация</Link></p>\r\n      </form>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction InfoTooltip ({ isOpen, onClose, text, pic, formClassNameMod }) {\r\n  return (\r\n    <PopupWithForm\r\n      name=\"tooltip\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      formClassNameMod={formClassNameMod}\r\n    >\r\n      <div className={`popup__tooltip-${pic}`} />\r\n      <p className=\"popup__tooltip-text\">\r\n        {text}\r\n      </p>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default InfoTooltip;\r\n","//identity\r\nexport const identity = {\r\n    //token: '4f12e696-6331-47e4-913f-e0c0002ac61f',\r\n    //url: 'https://mesto.nomoreparties.co/v1/cohort-13',\r\n    url: 'https://auth.nomoreparties.co',\r\n    //id: '13b75ba77788c0a719630101',\r\n    token: localStorage.token\r\n}\r\n\r\n","import {identity} from './utils'\r\n\r\nclass Api {\r\n  constructor({token, url}) {\r\n    //this._token = token;\r\n    this._url = url;\r\n  }\r\n\r\n// response handlers\r\n\r\n  _handleResponse(res) {\r\n    if (res.ok) {\r\n      return res.json();\r\n    } else {\r\n      console.error(`Oops! Error: ${res.status}`)\r\n      //return Promise.reject(`Oops! Error: ${res.status}`);\r\n    }\r\n  }\r\n\r\n// cards\r\n\r\n  getInitialCards({ token }) {\r\n    return fetch(`${this._url}/cards`, {\r\n      headers: {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Bearer ${token}`\r\n      },\r\n      method: 'GET'\r\n    })\r\n      .then(this._handleResponse)\r\n  }\r\n\r\n  createCard({token, name, link}) {\r\n    return fetch(`${this._url}/cards`, {\r\n      headers: {\r\n        Accept: 'application/json',\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link\r\n      }),\r\n      method: 'POST'\r\n    })\r\n      .then(this._handleResponse)\r\n  }\r\n\r\n  deleteCard({token, id}) {\r\n    return fetch((`${this._url}/cards/${id}`), {\r\n      headers: {\r\n        Accept: 'application/json',\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      method: 'DELETE'\r\n    })\r\n      .then(this._handleResponse)\r\n  }\r\n\r\n  likeCard({token, cardId}) {\r\n    return fetch((`${this._url}/cards/${cardId}/likes`), {\r\n      headers: {\r\n        Accept: 'application/json',\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      method: 'PUT'\r\n    })\r\n    .then(this._handleResponse)\r\n  }\r\n\r\n  dislikeCard({token, cardId}) {\r\n    return fetch((`${this._url}/cards/${cardId}/likes`), {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      method: 'DELETE'\r\n    })\r\n    .then(this._handleResponse)\r\n  }\r\n\r\n// user info\r\n\r\n  getUserInfo ({token})  {\r\n    return fetch(`${this._url}/users/me`, {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n      },\r\n      method: 'GET'\r\n    })\r\n    .then(this._handleResponse)\r\n  }\r\n\r\n  setUserInfo ({name, bio, token}) {\r\n    return fetch(`${this._url}/users/me`, {\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          name: name,\r\n          about: bio\r\n        }),\r\n        method: 'PATCH'\r\n      }\r\n    )\r\n    .then(this._handleResponse)\r\n  }\r\n\r\n  setAvatar({avatar, token}) {\r\n    return fetch((`${this._url}/users/me/avatar`), {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        Authorization: `Bearer ${token}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({avatar}),\r\n      method: 'PATCH'\r\n    })\r\n    .then(this._handleResponse)\r\n  }\r\n\r\n  signUp({ email, password }) {\r\n    return fetch(`${this._url}/signup`, {\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n      .then(this._handleResponse)\r\n  }\r\n\r\n  signIn({ email, password }) {\r\n    return fetch(`${this._url}/signin`, {\r\n      headers: {\r\n        Accept: 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n      .then(this._handleResponse)\r\n  }\r\n}\r\n\r\nexport const api = new Api(identity);\r\n","import React from 'react';\nimport { Route, Switch, withRouter, useHistory } from 'react-router-dom';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ImagePopup from './ImagePopup';\nimport DeleteCardPopup from './DeleteCardPopup';\nimport Registration from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport Login from \"./Login\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\nimport {api} from \"../utils/api\";\nimport defaultAvatar from '../images/userpic.png';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setIsDeleteCardPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setImagePopupOpen] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState({isOpen: false, text: 'test', pic: 'ok'});\n  const [selectedCard, setSelectedCard] = React.useState('');\n  const [currentUser, setCurrentUser] = React.useState({name: 'Имя', about: 'Информация', avatar: defaultAvatar});\n  //const [currentUser, setCurrentUser] = React.useState({});\n  const [email, setEmail] = React.useState('');\n  const [cards, setCards] = React.useState([]);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n\n  const history = useHistory();\n\n  React.useEffect(() => {checkToken()\n    // eslint-disable-next-line\n  }, [])\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      Promise.all([api.getUserInfo({ token: localStorage.token }), api.getInitialCards({ token: localStorage.token })])\n        .then(([{ data: user }, { data: cards }]) => {\n          setCurrentUser(user)\n          setCards(cards.reverse())\n        })\n        .catch(handleError)\n    }\n  }, [loggedIn]);\n\n  function checkToken () {\n    if (localStorage.getItem('token')) {\n      const token = localStorage.getItem('token');\n      api.getUserInfo({token})\n        .then((res) => {\n          if (res.data) {\n            setLoggedIn(true);\n            setEmail(res.data.email);\n            history.push('/');\n          } else {\n            localStorage.removeItem('token')\n            setLoggedIn(false)\n            setCurrentUser({})\n            setEmail('')\n          }\n        })\n    }\n  }\n\n  function handleLogout () {\n    localStorage.removeItem('token')\n    setLoggedIn(false)\n    setCurrentUser({})\n    setEmail('')\n  }\n\n  function handleLogin ({ email, password }) {\n    api.signIn({ email, password })\n      .then((data) => {\n        if (data.token) {\n          localStorage.setItem('token', data.token)\n          setLoggedIn(true)\n          checkToken()\n        }\n      })\n      .catch((err) => {\n        console.error(err);\n        setIsInfoTooltipPopupOpen({isOpen: true, text: 'Что-то пошло не так! Попробуйте ещё раз', pic: 'error'})\n      })\n  }\n\n  function handleRegister ({ email, password }) {\n    api.signUp({ email, password })\n      .then((res) => {\n        if (res.data) {\n          setIsInfoTooltipPopupOpen({isOpen: true, text: 'Вы успешно зарегистрировались!', pic: 'ok'});\n          history.push('/sign-in');\n        }\n      })\n      .catch((err) => {\n        console.error(err);\n        setIsInfoTooltipPopupOpen({isOpen: true, text: 'Что-то пошло не так! Попробуйте ещё раз', pic: 'error'})\n      })\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true)\n  }\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true)\n  }\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true)\n  }\n  function handleCardDeleteClick(card) {\n    setSelectedCard(card);\n    setIsDeleteCardPopupOpen(true);\n  }\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setImagePopupOpen(true);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(item => item === currentUser._id);\n\n    function handleResponseLike({data: newCard}) {\n      const newCards = cards.map((item) => item._id === card._id ? newCard : item);\n      setCards(newCards);\n    }\n\n    if (isLiked) {\n      api.dislikeCard({cardId: card._id, token: localStorage.token})\n        .then(handleResponseLike)\n        .catch(handleError)\n    } else {\n      api.likeCard({cardId: card._id, token: localStorage.token})\n        .then(handleResponseLike)\n        .catch(handleError)\n    }\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard({id: card._id, token: localStorage.token})\n      .then(()=>{\n        const newCards = cards.filter((item)=>{\n          return item !== card\n        });\n        setCards(newCards);\n        setSelectedCard('');\n        closeAllPopups();\n      })\n      .catch(handleError)\n  }\n\n  function handleUpdateUser({name, about}) {\n    api.setUserInfo({name, bio: about, token: localStorage.token})\n      .then(()=>{\n        setCurrentUser({...currentUser, name, about});\n        closeAllPopups();\n      })\n      .catch(handleError)\n  }\n\n  function handleUpdateAvatar({avatar}) {\n    api.setAvatar({avatar, token: localStorage.token})\n      .then(()=>{\n        setCurrentUser({...currentUser, avatar});\n        closeAllPopups();\n      })\n      .catch(handleError)\n  }\n\n  function handleAddPlaceSubmit({name, link}) {\n    api.createCard({name, link, token: localStorage.token})\n      .then(({ data: newCard })=>{\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(handleError)\n  }\n\n  function handleError(error) {\n    console.error(error);\n    //return Promise.reject(error);\n  }\n\n  function closeAllPopups () {\n    setIsEditAvatarPopupOpen(false);\n    document.avatarForm.reset();\n    setIsEditProfilePopupOpen(false);\n    document.bioForm.reset();\n    setIsAddPlacePopupOpen(false);\n    document.cardForm.reset();\n    setIsDeleteCardPopupOpen(false);\n    setImagePopupOpen(false);\n    setIsInfoTooltipPopupOpen({isOpen: false, text: '', pic: ''});\n    setTimeout(function () {setSelectedCard('')}, 200);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n        <div className=\"page\">\n\n          {/*BIOGRAPHY POPUP*/}\n\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n\n          {/*CARD POPUP*/}\n\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n\n          {/*CHANGE AVATAR POPUP*/}\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n\n          {/*DELETE CARD POPUP*/}\n\n          <DeleteCardPopup\n            name=\"delete\"\n            isOpen={isDeleteCardPopupOpen}\n            onClose={closeAllPopups}\n            onDelete={handleCardDelete}\n            selectedCard={selectedCard}\n          />\n\n          {/*PHOTO POPUP*/}\n\n          <ImagePopup\n            isOpen={isImagePopupOpen}\n            onClose={closeAllPopups}\n            selectedCard={selectedCard}\n          />\n\n          {/*TOOLTIP*/}\n\n          <InfoTooltip\n            text={isInfoTooltipPopupOpen.text}\n            pic={isInfoTooltipPopupOpen.pic}\n            isOpen={isInfoTooltipPopupOpen.isOpen}\n            onClose={closeAllPopups}\n            formClassNameMod=\"popup__form_type_one-input\"\n          />\n\n          {/*HEADER*/}\n\n          <Header\n            email={email}\n            onLogout={handleLogout}\n            isLoggedIn={loggedIn}\n            history={history}\n          />\n\n          <Switch>\n            <Route path=\"/sign-in\" exact>\n              <Login onLogin={handleLogin} />\n            </Route>\n\n            <Route path=\"/sign-up\" exact>\n              <Registration onRegistration={handleRegister} />\n            </Route>\n\n          {/*PROFILE and ELEMENTS*/}\n\n            <ProtectedRoute\n              component={Main}\n              loggedIn={loggedIn}\n              cards={cards}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onEditAvatar={handleEditAvatarClick}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              onCardDelete={handleCardDeleteClick}\n            />\n          </Switch>\n          {/*FOOTER*/}\n\n          <Footer />\n        </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default withRouter(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}